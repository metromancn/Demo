<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Route Results Demo</title>
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    .timeline {
      position: relative;
      margin-left: 56px; /* room for time column */
      padding-left: 16px;
    }
    .timeline::before {
      content: "";
      position: absolute;
      left: 12px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: #e9ecef;
    }
    .t-item {
      position: relative;
      margin-bottom: 1.25rem;
    }
    .t-item:last-child {margin-bottom:0;}
    .t-time {
      position: absolute;
      left: -56px;
      width: 48px;
      text-align: right;
      color:#6c757d;
      font-size:.875rem;
    }
    .t-dot {
      position: absolute;
      left: 7px;
      top: 4px;
      width:10px;
      height:10px;
      border-radius:50%;
      background:#0d6efd;
    }
    .line-blue::before{background:#0d6efd;}
    .line-yellow::before{background:#ffc107;}
    .line-purple::before{background:#a855f7;}
    /* segment bar */
    .seg-bar {
      position: absolute;
      left: 12px;
      top: 14px;
      width:2px;
      height:100%;
    }
    .seg-blue{background:#0d6efd;}
    .seg-yellow{background:#ffc107;}
    .seg-purple{background:#a855f7;}
  </style>
</head>
<body>
<nav class="navbar bg-light border-bottom sticky-top">
  <div class="container-fluid align-items-center">
    <a href="#" class="me-2 text-decoration-none text-dark"><i class="bi bi-chevron-left fs-4"></i></a>
    <div class="flex-grow-1 text-truncate fw-semibold">亚东医院 → 十四张</div>
    <button class="btn btn-link text-dark p-0"><i class="bi bi-three-dots-vertical"></i></button>
  </div>
</nav>
<div class="container pt-3" style="max-width:600px;">
  <!-- sort tabs -->
  <ul class="nav nav-tabs mb-3" id="sortTabs" role="tablist">
    <li class="nav-item" role="presentation"><button class="nav-link active" data-sort="early">早到达</button></li>
    <li class="nav-item" role="presentation"><button class="nav-link" data-sort="few">少转乘</button></li>
    <li class="nav-item" role="presentation"><button class="nav-link" data-sort="cheap">省车资</button></li>
  </ul>
  <!-- parameter pill & route index -->
  <div class="d-flex align-items-center mb-3">
    <button class="btn btn-outline-secondary btn-sm me-auto d-flex align-items-center"><span id="paramPill">07:20 出发</span><i class="bi bi-chevron-down ms-1"></i></button>
    <div id="routeIndex" class="btn-group" role="group"></div>
  </div>
  <!-- summary -->
  <div class="mb-3">
    <h3 class="fw-bold" id="summaryTime">07:20 <i class="bi bi-arrow-right"></i> 07:56</h3>
    <div class="text-muted small" id="summaryMeta">耗时 30 分 | 转乘 1 次 | 车资 $30</div>
  </div>
  <!-- timeline -->
  <div id="timeline"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Mock route data: 3 alternatives
const routeData=[
  {
    summary:{start:"07:20",end:"07:56",duration:30,transfers:1,cost:30,param:"07:20 出发"},
    segments:[
      {time:"07:20",station:"亚东医院",code:"BL05",line:"板南线",dir:"南港展览馆",stops:2,mins:5,km:4,color:"blue"},
      {transfer:true},
      {time:"07:30",station:"板桥",code:"Y16",line:"环状线",dir:"大坪林",stops:8,mins:26,km:15,color:"yellow"},
      {time:"07:56",station:"十四张",code:"Y08",terminal:true}
    ]
  },
  {
    summary:{start:"05:57",end:"06:34",duration:39,transfers:0,cost:160,param:"3/17 首班车"},
    segments:[
      {time:"05:57",station:"机场第二航厦",code:"A13",line:"桃园机场捷运",dir:"直达—台北车站",stops:4,mins:37,km:35.8,color:"purple"},
      {time:"06:34",station:"台北车站(机场捷运)",code:"A01",terminal:true}
    ]
  },
  {
    summary:{start:"16:23",end:"16:37",duration:16,transfers:0,cost:25,param:"16:40 抵达"},
    segments:[
      {time:"16:23",station:"板桥(高铁)",walk:{mins:2,metres:90}},
      {time:"16:25",station:"板桥",code:"Y16",line:"环状线",dir:"新北产业园区",stops:4,mins:13,km:10,color:"yellow"},
      {time:"16:37",station:"新北产业园区",code:"Y20",walk:{mins:2,metres:120}},
      {time:"16:39",station:"新北产业园区(机场捷运)",terminal:true}
    ]
  }
];
let currentIndex=0;
function renderRouteIndex(){
  const container=document.getElementById('routeIndex');
  container.innerHTML='';
  routeData.forEach((_,i)=>{
    const btn=document.createElement('button');
    btn.className=`btn btn-outline-secondary btn-sm ${i===currentIndex?'active btn-success text-white':''}`;
    btn.textContent=i+1;
    btn.onclick=()=>{currentIndex=i;updateView();};
    container.appendChild(btn);
  });
}
function updateView(){
  const r=routeData[currentIndex];
  // summary
  document.getElementById('summaryTime').innerHTML=`${r.summary.start} <i class="bi bi-arrow-right"></i> ${r.summary.end}`;
  document.getElementById('summaryMeta').textContent=`耗时 ${r.summary.duration} 分 | 转乘 ${r.summary.transfers} 次 | 车资 $${r.summary.cost}`;
  document.getElementById('paramPill').textContent=r.summary.param;
  // timeline
  const tl=document.getElementById('timeline');
  tl.innerHTML='';
  r.segments.forEach((seg,idx)=>{
    if(seg.transfer){
      const div=document.createElement('div');
      div.className='t-item';
      div.innerHTML='<div class="t-time"></div><div class="t-dot bg-transparent"></div><div class="ps-4 small text-muted"><i class="bi bi-arrow-repeat me-1"></i>换乘</div>';
      tl.appendChild(div);
      return;
    }
    if(seg.walk){
      const div=document.createElement('div');
      div.className='t-item';
      div.innerHTML=`<div class="t-time">${seg.time}</div><div class="t-dot bg-transparent"><i class='bi bi-geo-alt-fill text-secondary position-absolute top-0 start-0 translate-middle'></i></div><div class="ps-4 small text-muted">徒歩 ${seg.walk.mins} 分 | ${seg.walk.metres} m</div>`;
      tl.appendChild(div);
      return;
    }
    const item=document.createElement('div');
    item.className=`t-item line-${seg.color}`;
    item.innerHTML=`<div class="t-time">${seg.time}</div>
      <span class="t-dot" style="background:${seg.color==='blue'?'#0d6efd':seg.color==='yellow'?'#ffc107':'#a855f7'}"></span>
      <div class="seg-bar seg-${seg.color}"></div>
      <div class="ps-4">
        <div class="fw-semibold">${seg.station} ${seg.code?'<span class="badge bg-light text-secondary ms-1">'+seg.code+'</span>':''}</div>
        ${seg.line?`<div class="small text-muted">${seg.line}　${seg.dir} 方向</div>`:''}
        ${seg.stops?`<div class="small text-muted">▼ ${seg.stops}站 | ${seg.mins}分 | ${seg.km}km</div>`:''}
      </div>`;
    tl.appendChild(item);
  });
  renderRouteIndex();
}
updateView();
</script>
</body>
</html>
